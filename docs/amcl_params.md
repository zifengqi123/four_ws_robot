# параметры AMCL

[официальная документация](http://wiki.ros.org/amcl)

## общие параметры фильтра

`min_particles (int, default: 100)` - определяет минимально допустимое количество частиц

`max_particles (int, default: 5000)` - определяет максимально допустимое количество частиц

`kld_err (double, default: 0.01)` - относится к максимальному порогу ошибки, используемому в процессе выборки KLD. Процесс отбора проб KLD используется для адаптации количества частиц, используемых в алгоритме локализации по методу Монте-Карло, на основе распределения частиц. параметр "kld_err" устанавливает пороговое значение для максимально допустимой ошибки в распределении частиц. если ошибка превышает этот порог, количество частиц будет увеличено для повышения точности локализации. и наоборот, если ошибка ниже этого порога и количество частиц превышает порог "kld_z", количество частиц будет уменьшено для повышения эффективности вычислений. проще говоря, параметр kld_err используется для контроля баланса между количеством частиц и точностью локализации

`kld_z (double, default: 0.99)` - определяет порог для максимально допустимого количества частиц в измерении "z", выше которого количество частиц будет уменьшено. цель состоит в том, чтобы поддерживать достаточное количество частиц, избегая при этом их слишком большого количества, что может замедлить процесс локализации

`update_min_d (double, default: 0.2 meters)` - определяет поступательное движение, необходимое перед выполнением обновления фильтра

`update_min_a (double, default: π/6.0 radians)` - определяет вращательное движение, необходимое перед выполнением обновления фильтра

`resample_interval (int, default: 2)` - определяет количество обновлений фильтра, необходимых перед повторной выборкой

`transform_tolerance (double, default: 0.1 seconds)` - определяет максимально допустимую разницу в секундах между временем записи преобразования и временем его использования. в AMCL положение и ориентация робота оцениваются на основе данных датчиков и карты окружающей среды. предполагаемое положение и ориентация робота представлены преобразованием, которое представляет собой математическое представление положения и ориентации робота во фрейме карты. параметр transform_tolerance используется для указания того, как долго алгоритм AMCL будет продолжать использовать преобразование, прежде чем оно будет признано слишком старым и должно быть отброшено. например, если для параметра transform_tolerance установлено значение 0,1 секунды, алгоритм AMCL будет использовать только преобразования, которые были записаны в течение последних 0,1 секунды. если преобразование старше 0,1 секунды, оно будет отброшено, и алгоритм AMCL продолжит использовать последнее допустимое преобразование. это может помочь предотвратить использование алгоритмом устаревшей информации, что может привести к плохим результатам локализации. важно отметить, что для этого параметра следует установить значение, подходящее для конкретного приложения и конфигурации датчика, поскольку слишком низкое значение может привести к слишком частому удалению достоверной информации, а слишком высокое значение может привести к использованию устаревшей информации

`recovery_alpha_slow (double, default: 0.0 (disabled))` - определяет экспоненциальную скорость затухания для фильтра медленного среднего веса, используемого при принятии решения о том, когда восстанавливаться, добавляя случайные позы. Хорошим значением может быть 0,001

`recovery_alpha_fast (double, default: 0.0 (disabled))` - определяет экспоненциальную скорость затухания для фильтра быстрого среднего веса, используемого при принятии решения о том, когда восстанавливаться, добавляя случайные позы. Хорошим значением может быть 0.1

`initial_pose_x (double, default: 0.0 meters)` - определяет начальное значение позы (x), используемое для инициализации фильтра с распределением по Гауссу

`initial_pose_y (double, default: 0.0 meters)` - определяет начальное значение позы (y), используемое для инициализации фильтра с распределением по Гауссу

`initial_pose_a (double, default: 0.0 radians)` - определяет начальное значение положения (рыскание), используемое для инициализации фильтра с распределением по Гауссу

`initial_cov_xx (double, default: 0.5*0.5=0.25 meters)` - определяет начальную ковариацию позы (x*x), используемую для инициализации фильтра с распределением по Гауссу

`initial_cov_yy (double, default: 0.5*0.5=0.25 meters)` - определяет начальную ковариацию позы (y*y), используемую для инициализации фильтра с распределением по Гауссу

`initial_cov_aa (double, default: (π/12)*(π/12)=0.06854 radian)` - определяет начальную ковариацию позы (рыскание*рыскание), используемую для инициализации фильтра с распределением по Гауссу

`gui_publish_rate (double, default: -1.0 Hz)` - определяет максимальную частоту (Гц), с которой сканы и пути публикуются для визуализации, -1.0 для отключения

`save_pose_rate (double, default: 0.5 Hz)` - определяет максимальную частоту (Гц), с которой последняя оцененная позиция и ковариация сохраняются на сервере параметров в переменных ~initial_pose_* и ~initial_cov_*. эта сохраненная позиция будет использоваться при последующих запусках для инициализации фильтра. -1.0 для отключения.

`use_map_topic (bool, default: false)` - если установлено значение true, AMCL подпишется на раздел карты, а не будет выполнять вызов службы для получения своей карты

`first_map_only (bool, default: false)` - если установлено значение true, AMCL будет использовать только первую карту, на которую он подписался, вместо того, чтобы обновлять ее каждый раз при получении новой

`selective_resampling (bool, default: false)` - определяет, должен ли алгоритм AMCL использовать выборочную повторную выборку или нет. повторная выборка - это процесс, который используется в фильтре частиц, который является основным компонентом алгоритма AMCL. фильтр частиц использует набор частиц для представления возможных местоположений робота на карте. повторная выборка используется для обновления набора частиц на основе данных датчика с целью обеспечения того, чтобы частицы, соответствующие более вероятным позициям робота, имели более высокую вероятность быть выбранными. выборочная повторная выборка - это метод оптимизации, который повышает эффективность процесса повторной выборки за счет повторной выборки только тех частиц, которые вряд ли соответствуют истинному положению робота. путем повторной выборки только подмножества частиц выборочная повторная выборка может уменьшить количество частиц, которые необходимо повторно выбрать, что может повысить производительность алгоритма AMCL. если параметру selective_resampling присвоено значение true, алгоритм AMCL будет использовать выборочную повторную выборку. если для него установлено значение false, алгоритм AMCL не будет использовать выборочную повторную выборку. важно отметить, что использование выборочной повторной выборки может повысить производительность алгоритма AMCL, но это также увеличивает время вычислений. поэтому важно находить компромисс между временем вычисления и точностью при установке параметра selective_resampling

## параметры лазерной модели

`laser_min_range (double, default: -1.0)` - определяет минимальный диапазон сканирования, который следует учитывать; -1.0 приведет к использованию заявленной минимальной дальности действия лазера

`laser_max_range (double, default: -1.0)` - определяет максимальный диапазон сканирования, который следует учитывать; -1.0 приведет к использованиюзаявленной максимальной дальности действия лазера

`laser_max_beams (int, default: 30)` - определяет, сколько равномерно расположенных лучей в каждом сканировании следует использовать при обновлении фильтра

`laser_z_hit (double, default: 0.95)` - определяет ожидаемое измерение попадания (т.е. когда лазерный луч успешно обнаруживает препятствие). более высокое значение этого параметра увеличит вероятность попадания частицы, когда данные лазерного сканирования совпадут с ожидаемым измерением попадания

`laser_z_short (double, default: 0.1)` - определяет ожидаемое измерение для короткого считывания (т.е. когда лазерный луч обнаруживает препятствие до того, как он достигнет максимальной дальности). более высокое значение этого параметра увеличит вероятность обнаружения частицы, когда данные лазерного сканирования совпадут с ожидаемым измерением для короткого считывания

`laser_z_max (double, default: 0.05)` - определяет максимальную дальность действия лазерного датчика. более высокое значение этого параметра уменьшит вероятность обнаружения частицы, когда данные лазерного сканирования превысят этот диапазон

`laser_z_rand (double, default: 0.05)` - представляет вероятность случайного измерения (т.е. когда лазерный луч не обнаруживает препятствие).более высокое значение этого параметра увеличит вероятность обнаружения частицы, когда данные лазерного сканирования совпадут с ожидаемым измерением для случайного считывания

`laser_sigma_hit (double, default: 0.2 meters)` - представляет стандартное отклонение распределения Гаусса, используемого для моделирования шума при измерениях попадания. более высокое значение этого параметра увеличит диапазон возможных измерений, которые будут считаться попаданием

`laser_lambda_short (double, default: 0.1)` - определяет скорость затухания экспоненциального распределения, используемого для моделирования коротких показаний. более высокое значение этого параметра увеличит вероятность коротких показаний

`laser_likelihood_max_dist (double, default: 2.0 meters)` - этот параметр представляет максимальное расстояние, на котором модель лазерного датчика будет использоваться для вычисления вероятности обнаружения частицы. более высокое значение этого параметра увеличит диапазон, в котором будет использоваться модель датчика

---

`laser_model_type (string, default: "likelihood_field")` - относится к типу модели датчика, используемой для лазерного дальномера. модель датчика - это математическое представление характеристик датчика и того, как он взаимодействует с окружающей средой. пакет amcl поддерживает несколько различных моделей лазерных датчиков, а параметр "laser_model_type" позволяет вам выбрать, какую из них использовать. варианты таковы:

* `likelihood_field`: эта модель использует поле правдоподобия для представления вероятности нахождения частицы в определенном месте на основе лазерных измерений

* `beam`: в этой модели используется подход, основанный на луче, при котором каждый луч обрабатывается независимо

* `likelihood_field_prob`: эта модель похожа на модель "likelihood_field", но в ней используется вероятностное представление вероятности

* `beam_model_prob`: эта модель похожа на модель "beam", но в ней используется вероятностное представление вероятности

Выбор модели датчика будет зависеть от характеристик лазерного дальномера, окружающей среды и конкретных требований приложения

## параметры модели одометрии

`odom_model_type (string, default: "diff")` - относится к типу модели движения, используемой для одометрии. модель движения - это математическое представление того, как движется робот, и как на это движение влияют шум и другие факторы. пакет amcl поддерживает несколько различных моделей движения odometry, а параметр "odom_model_type" позволяет вам выбрать, какую из них использовать. варианты таковы:

• `diff`: эта модель предназначена для роботов с дифференциальным приводом. Он предполагает, что движение робота состоит из прямой и угловой скоростей, и использует эти скорости для оценки положения и ориентации робота

• `omni`: эта модель предназначена для всенаправленных роботов. Он использует поступательную и угловую скорости робота, а также его боковые скорости для оценки положения и ориентации робота

• `diff-corrected`: Эта модель является расширением модели "diff" и использует одометрию колес и IMU для уменьшения дрейфа в одометрии.
Выбор модели движения будет зависеть от характеристик робота, окружающей среды и конкретных требований приложения

---

`odom_alpha1 (double, default: 0.2)` - определяет количество шума, которое добавляется к скорости вращения робота

`odom_alpha2 (double, default: 0.2)` - определяет количество шума, которое добавляется к скорости вращения робота

`odom_alpha3 (double, default: 0.2)` - определяет количество шума, которое добавляется к поступательному перемещению робота

`odom_alpha4 (double, default: 0.2)` - определяет уровнем шума, который добавляется к вращательному перемещению робота

`odom_alpha5 (double, default: 0.2)` - определяет количество шума, которое добавляется к поступательному ускорению робота

`odom_frame_id (string, default: "odom")` - определяет, какой фрейм использовать для одометрии

`base_frame_id (string, default: "base_link")` - определяет, какой фрейм использовать для основания робота

`global_frame_id (string, default: "map")` - определяет название системы координат, опубликованной системой локализации

`tf_broadcast (bool, default: true)` - относится к действию публикации предполагаемого положения и ориентации робота (pose) в виде сообщения "transform" в библиотеке преобразования ROS (tf). библиотека tf отвечает за поддержание связей между различными кадрами координат в системе, и она использует опубликованные преобразования для обновления положений различных кадров. параметр "tf_broadcast" - это логическое значение, которое определяет, будет ли узел amcl публиковать оценочную позу робота в библиотеке tf или нет. если установлено значение true, узел amcl опубликует оценочную позу, позволяя другим узлам использовать ее для обновления своих собственных кадров и выполнения других задач, таких как визуализация положения робота на карте. если установлено значение false, узел amcl не будет публиковать расчетную позу, и другие узлы не смогут получить к ней доступ. по умолчанию для параметра tf_broadcast установлено значение true, но можно установить для него значение false, если вы не хотите, чтобы amcl публиковал позу и использовал данные из других источников